(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd241c54"],{6859:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"planning"},[n("div",{staticClass:"page-title"},[n("h3",[t._v(t._s(t._f("localize")("Menu_Planning")))]),n("h4",[t._v(t._s(t._f("currency")(t.info.bill,"RUB")))])]),t.loading?n("loader"):t.categories.length?n("section",[n("ul",{staticClass:"collapsible"},t._l(t.dateSections,(function(e){return n("li",{class:{active:e.isActive}},[n("div",{staticClass:"collapsible-header",on:{click:function(n){return t.showCategories(e)}}},[n("i",{staticClass:"material-icons"},[t._v("date_range")]),t._v(" "+t._s(e.name)+" ")]),n("div",{staticClass:"collapsible-body"},t._l(t.categories,(function(i){return n("div",{key:i.id},[i.months[e.value]?n("p",[n("strong",[t._v(t._s(i.title)+":")]),t._v(" "+t._s(t._f("currency")(i.months[e.value].spend))+" "+t._s(t._f("localize")("Of"))+" "+t._s(t._f("currency")(i.limit))+" ")]):t._e(),i.months[e.value]?n("div",{directives:[{name:"tooltip",rawName:"v-tooltip.noloc",value:i.months[e.value].tooltip,expression:"cat.months[date.value].tooltip",modifiers:{noloc:!0}}],staticClass:"progress"},[n("div",{staticClass:"determinate",class:[i.months[e.value].progressColor],style:{width:i.months[e.value].progressPercent+"%"}})]):t._e()])})),0)])})),0)]):n("p",{staticClass:"center"},[t._v(" "+t._s(t._f("localize")("Categories_NoCat"))+". "),n("router-link",{attrs:{to:"/categories"}},[t._v(t._s(t._f("localize")("AddFirst")))])],1)],1)},a=[],s=(n("99af"),n("4de4"),n("d81d"),n("13d5"),n("96cf"),n("1da1")),o=n("5530"),c=n("2f62"),r=n("5bb3"),l=n("e977"),u=n("d7c2"),d=n("2ef0"),f=n.n(d),v={name:"Planning",metaInfo:function(){return{title:this.$title("Menu_Planning")}},data:function(){return{loading:!0,categories:[],dateSections:[]}},computed:Object(o["a"])({},Object(c["c"])(["info"])),methods:{showCategories:function(t){this.dateSections.map((function(e){e.value===t.value&&t.isActive?e.isActive=!1:e.isActive=e.value===t.value}))}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=u["d"],e.next=3,t.$store.dispatch("fetchRecords");case 3:return e.t1=e.sent,e.t2={key:"date",type:"date",sort:"up-down"},n=(0,e.t0)(e.t1,e.t2),e.next=8,t.$store.dispatch("fetchCategories");case 8:i=e.sent,n.length>0&&(t.dateSections=f.a.uniq(n.map((function(t){return t.dateSection}))).filter((function(t){return t})).map((function(t){return{name:Object(u["c"])(t),value:t,isActive:!1}})),t.dateSections[0]["isActive"]=!0),i.length>0&&(t.categories=i.map((function(t){var e={};return t.months&&t.months.map((function(i){var a=n.filter((function(e){return e.categoryId===t.id})).filter((function(t){return t.dateSection===i})).filter((function(t){return"outcome"===t.type})).reduce((function(t,e){return t+ +e.amount}),0),s=100*a/t.limit,o=s>100?100:s,c=s<60?"green":s<100?"yellow":"red",u=t.limit-a,d="".concat(u<0?Object(l["a"])("MoreThan"):Object(l["a"])("Stayed")," ").concat(Object(r["a"])(Math.abs(u)));e[i]={spend:a,progressPercent:o,progressColor:c,tooltip:d}})),Object(o["a"])({},t,{months:e})}))),t.loading=!1;case 12:case"end":return e.stop()}}),e)})))()}},p=v,m=(n("f62a"),n("2877")),h=Object(m["a"])(p,i,a,!1,null,null,null);e["default"]=h.exports},dcb5:function(t,e,n){},f62a:function(t,e,n){"use strict";var i=n("dcb5"),a=n.n(i);a.a}}]);
//# sourceMappingURL=chunk-dd241c54.d7edd3d3.js.map